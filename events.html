<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Saved Events - RainCheck</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        header
        {
            margin-top: 5%;
        }
    </style>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                    colors: {
                        // checker.html theme colors
                        'nasa-blue': '#1e3a8a', 
                        'nasa-gold': '#f59e0b',
                        'success': '#10b981',
                        'warning': '#f59e0b',
                        'danger': '#ef4444',
                        // Added colors for the Navbar/Footer consistency
                        'blue-600': '#2563EB',
                        'blue-700': '#1D4ED8',
                        'blue-800': '#1E40AF',
                        'blue-100': '#DBEAFE',
                        'green-500': '#10B981',
                    }
                }
            }
        }
    </script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@100..900&display=swap');
    </style>
</head>
<body class="bg-gray-50 min-h-screen font-sans">

    <nav id="nav-element" class="fixed w-full z-50 transition-all duration-300 bg-transparent">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
        <div class="flex justify-between items-center h-20">
            <div class="flex items-center space-x-3">
                        <span class="inline-flex items-center justify-center h-10 w-10 rounded-full bg-nasa-blue shadow-lg">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.976A3.996 3.996 0 0012 3m-7.234 10.976a4 4 0 011.01-1.376M14 10l-2-2m0 0l-2 2m2-2v8" />
                            </svg>
                        </span>
                        <span class="text-2xl font-extrabold text-nasa-blue tracking-tight">RainCheck</span>
             </div>

            <div class="hidden md:flex space-x-6 items-center">
                <a href="index.html" class="text-gray-700 hover:text-nasa-gold transition font-medium">Home</a>
                <a href="features.html" class="text-gray-700 hover:text-nasa-gold transition font-medium">Features</a>
                <a href="events.html" class="text-gray-700 hover:text-nasa-gold transition font-medium">Events</a>
                <a href="checker.html" class="text-gray-700 hover:text-nasa-gold transition font-medium">Check Weather</a>
                <a href="about.html" class="text-gray-700 hover:text-nasa-gold transition font-medium">About</a>
                <a href="checker.html" class="bg-nasa-gold text-white px-5 py-2.5 rounded-lg font-semibold hover:bg-nasa-gold/90 transition shadow-md ml-4">
                    Analyze Risk ‚Üí
                </a>
            </div>

            <div class="md:hidden">
                <button id="menu-button" type="button" class="text-gray-700 hover:text-nasa-blue focus:outline-none focus:text-nasa-blue" aria-controls="mobile-menu" aria-expanded="false">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                    </svg>
                </button>
            </div>
        </div>
    </div>

    <div id="mobile-menu" class="hidden md:hidden bg-white shadow-md">
        <div class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
            <a href="index.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Home</a>
            <a href="features.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Features</a>
            <a href="events.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">Events</a>
            <a href="checker.html" class="block px-3 py-2 rounded-md text-base font-medium text-nasa-blue font-bold hover:bg-gray-100">Check Weather</a>
            <a href="about.html" class="block px-3 py-2 rounded-md text-base font-medium text-gray-700 hover:bg-gray-100">About</a>
            <a href="checker.html" class="block w-full text-center bg-nasa-gold text-white py-2 rounded-lg font-semibold mt-2 hover:bg-nasa-gold/90">
                Analyze Risk ‚Üí
            </a>
        </div>
    </div>
</nav>
    
    <div class="max-w-6xl mx-auto pt-24 p-4 sm:p-8">
        <header class="text-center mb-8">
            <h1 class="text-3xl sm:text-4xl font-extrabold text-nasa-blue tracking-tight rounded-lg p-2">
                My Saved Events
            </h1>
            <p class="text-xl text-gray-600 mt-2">All your important outdoor plans and their risk assessment.</p>
        </header>

        <div class="mb-6">
             <a href="checker.html" class="inline-block px-4 py-2 text-nasa-blue font-semibold rounded-lg hover:bg-gray-200 transition duration-150 shadow-sm border border-gray-300">
                ‚Üê Back to Checker
            </a>
        </div>

        <div id="eventsContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>

        <div id="emptyState" class="hidden text-center mt-16 p-10 bg-white shadow-xl rounded-xl">
            <div class="text-6xl mb-4">üóìÔ∏è</div>
            <h3 class="text-2xl font-bold text-gray-800">No Events Saved Yet</h3>
            <p class="text-gray-600 mt-2">Go back to the checker, analyze an event, and hit "Save Event" to start planning!</p>
            <a href="checker.html" class="mt-4 inline-block px-6 py-3 bg-nasa-gold text-white font-bold rounded-lg hover:bg-nasa-gold/90 transition duration-150">
                Start Planning
            </a>
        </div>
    </div>
    
    <footer class="bg-gray-900 text-white py-12 px-4">
        <div class="max-w-7xl mx-auto">
            <div class="grid md:grid-cols-4 gap-8">
                
                <div>
                    <div class="flex items-center space-x-2 mb-4">
                        <svg class="h-8 w-8 text-nasa-gold" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 15a4 4 0 004 4h9a5 5 0 10-.1-9.976A3.996 3.996 0 0012 3m-7.234 10.976a4 4 0 011.01-1.376M14 10l-2-2m0 0l-2 2m2-2v8" /></svg>
                        <span class="text-xl font-bold">RainCheck</span>
                    </div>
                    <p class="text-gray-400 text-sm">
                        A weather risk assessment tool developed by  Team AlphaZ9.3  for the NASA Space Apps Challenge 2025.
                    </p>
                </div>

                <div>
                    <h4 class="font-bold mb-4 text-nasa-gold">Overview</h4>
                    <ul class="space-y-2 text-gray-400 text-sm">
                            <li><a href="index.html" class="hover:text-white transition">Home</a></li>
                            <li><a href="features.html" class="hover:text-white transition">Features</a></li>
                            <li><a href="events.html" class="hover:text-white transition">Events Page</a></li>
                            <li><a href="checker.html" class="hover:text-white transition">Check Weather</a></li>
                            <li><a href="about.html" class="hover:text-white transition">About RainCheck</a></li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-bold mb-4 text-nasa-gold">Team AlphaZ9.3</h4>
                    <ul class="space-y-2 text-gray-400 text-sm">
                        <li>Team Lead: Rafkhan  </li>
                        <li><a href="#" class="hover:text-white transition">Careers (Future)</a></li>
                        <li><a href="#" class="hover:text-white transition">Privacy & Policy</a></li>
                        <li><a href="#" class="hover:text-white transition">Terms of Service</a></li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-bold mb-4 text-nasa-gold">Contact Us</h4>
                    <div class="flex space-x-4">
                        <a href="mailto:rafkhanb0@gmail.com" class="text-gray-400 hover:text-nasa-gold transition" aria-label="Email Address">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M22 6c0-1.1-.9-2-2-2H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6zm-2 0l-8 5-8-5h16zm0 12H4V8l8 5 8-5v10z"/></svg>
                        </a>
                        <a href="https://instagram.com/er_ratum" class="text-gray-400 hover:text-nasa-gold transition" aria-label="Instagram Profile">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12 2c2.716 0 3.056.012 4.122.067 1.053.053 1.79.22 2.427.464.673.255 1.234.613 1.77 1.148.536.536.903 1.097 1.158 1.77.243.637.41 1.374.464 2.427.056 1.066.067 1.406.067 4.122s-.012 3.056-.067 4.122c-.053 1.053-.22 1.79-.464 2.427-.255.673-.613 1.234-1.148 1.77-.536.536-1.097.903-1.77 1.158-.637.243-1.374-.41-2.427-.464-1.066-.056-1.406-.067-4.122-.067s-3.056-.012-4.122-.067c-1.053-.053-1.79-.22-2.427-.464-.673-.255-1.234-.613-1.77-1.148-.536-.536-1.097-.903-1.77-1.158-.637-.243-1.374-.41-2.427-.464C8.944 2.012 9.284 2 12 2zm0 4.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM12 8a4 4 0 110 8 4 4 0 010-8zm4.5-2.5a1 1 0 100 2 1 1 0 000-2z"/></svg>
                        </a>
                        <a href="https://wa.me/918129925845" class="text-gray-400 hover:text-nasa-gold transition" aria-label="WhatsApp Number">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path d="M12.039 2c-5.467 0-9.916 4.453-9.916 9.916 0 1.637.418 3.233 1.206 4.676l-1.258 4.593 4.706-1.232c1.376.757 2.924 1.155 4.962 1.155h.005c5.467 0 9.916-4.453 9.916-9.916.001-5.463-4.452-9.916-9.916-9.916zm-.005 18.064c-1.84 0-3.551-.548-5.004-1.579l-3.23 1.047 1.05-3.136c-1.107-1.46-1.688-3.14-1.688-4.945 0-4.505 3.666-8.172 8.172-8.172 2.186 0 4.254.852 5.808 2.406 1.554 1.554 2.406 3.622 2.406 5.808-.001 4.505-3.667 8.172-8.173 8.172zm4.075-5.914c-.22-.361-.88-.707-.932-.733-.053-.027-.376-.04-.543-.04-.166 0-.313.053-.479.213-.166.16-.645.64-.789.774-.144.133-.29.15-.54.08-.25-.067-1.054-.388-2.007-1.233-.743-.653-1.246-1.47-1.39-1.723-.144-.253-.016-.39.127-.523.13-.13.29-.313.433-.477.143-.163.19-.276.29-.476.098-.199.049-.376-.024-.523-.073-.146-.66-.462-.907-.63-.247-.168-.426-.143-.585-.146-.156-.003-.334-.002-.51-.002-.176 0-.46.04-.707.319-.247.279-.94.92-.94 2.246 0 1.326.96 2.593 1.096 2.76.136.167 1.884 2.868 4.57 3.996 2.686 1.127 2.77 1.272 3.284 1.34 2.596.398 3.535.08 4.093-.264.558-.344.88-.937.88-1.564 0-.627-.233-.937-.47-.133z"/></svg>
                        </a>
                         <a href="https://github.com/Rafkhan01" class="text-gray-400 hover:text-nasa-gold transition" aria-label="GitHub Repository">
                            <svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.419 2.864 8.165 6.837 9.49.5.092.682-.218.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.341-3.369-1.341-.454-1.157-1.107-1.464-1.107-1.464-.908-.62.069-.608.069-.608 1.007.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.831.091-.645.357-1.088.653-1.339-2.227-.253-4.555-1.114-4.555-4.943 0-1.091.39-1.988 1.03-2.685-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.025.798-.221 1.649-.331 2.499-.335.85.004 1.701.114 2.499.335 1.91-1.295 2.75-1.025 2.75-1.025.546 1.378.202 2.397.098 2.65.64.697 1.03 1.594 1.03 2.685 0 3.839-2.332 4.687-4.565 4.935.369.319.692.946.692 1.916 0 1.383-.012 2.497-.012 2.836 0 .267.18.577.688.484C20.146 20.16 23 16.416 23 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd"/></svg>
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="border-t border-gray-800 mt-12 pt-8 text-center text-gray-400">
                <p class="text-sm">&copy; 2025 RainCheck. All Rights Reserved.</p>
                <p class="mt-2 text-xs">Developed by Team AlphaZ9.3 | Project Lead: Rafkhan   | Built for NASA Space Apps Challenge.</p>
            </div>
        </div>
    </footer>


    <script>
        // --- Navbar Scroll Logic (Copied from checker.html) ---
        document.addEventListener('DOMContentLoaded', () => {
            const nav = document.getElementById('nav-element');

            function handleScroll() {
                if (window.scrollY > 50) {
                    nav.classList.add('bg-white', 'shadow-lg');
                    nav.classList.remove('bg-transparent');
                } else {
                    nav.classList.remove('bg-white', 'shadow-lg');
                    nav.classList.add('bg-transparent');
                }
            }
            const menuButton = document.getElementById('menu-button');
            const mobileMenu = document.getElementById('mobile-menu');
            menuButton.addEventListener('click', () => {
                mobileMenu.classList.toggle('hidden');
            });
            window.addEventListener('scroll', handleScroll);
            handleScroll();
        });


        const eventsContainer = document.getElementById('eventsContainer');
        const emptyState = document.getElementById('emptyState');
        
        // Define color classes to use saved risk info
        const RISK_COLORS = {
            'success': 'border-success bg-success/10',
            'warning': 'border-warning bg-warning/10',
            'danger': 'border-danger bg-danger/10',
        };

        /**
         * Renders all events saved in Local Storage.
         */
        function renderSavedEvents() {
            // 1. Retrieve data
            const events = JSON.parse(localStorage.getItem('savedEvents')) || [];

            // Clear container first
            eventsContainer.innerHTML = '';

            if (events.length === 0) {
                emptyState.classList.remove('hidden');
                return;
            } else {
                emptyState.classList.add('hidden');
            }

            // Sort events by date, closest date first
            events.sort((a, b) => new Date(a.date) - new Date(b.date));

            // 2. Loop and render cards
            events.forEach(event => {
                const forecast = event.forecast;
                const risk = event.risk;
                const colorClass = RISK_COLORS[risk.color];
                const card = document.createElement('div');
                card.classList = `bg-white p-5 rounded-xl shadow-xl border-l-4 ${colorClass}`;
                card.innerHTML = `
                    <div class="flex justify-between items-start">
                        <div>
                            <h3 class="text-xl font-bold text-gray-800">${event.eventName || 'Unnamed Event'}</h3>
                            <p class="text-sm text-gray-500 mt-1">${event.locationName}</p>
                            <p class="text-2xl font-extrabold text-nasa-blue mt-3">${new Date(event.date).toLocaleDateString('en-US', { weekday: 'short', year: 'numeric', month: 'short', day: 'numeric' })}</p>
                        </div>
                        <div class="text-right">
                            <p class="text-5xl">${forecast.icon}</p>
                            <p class="text-xs text-gray-600 capitalize">${forecast.condition}</p>
                        </div>
                    </div>
                    
                    <div class="grid grid-cols-3 text-center border-t border-gray-200 pt-3 mt-4">
                        <div>
                            <p class="text-xl font-bold text-nasa-blue">${forecast.max_temp}</p>
                            <p class="text-xs text-gray-500">Max Temp (&deg;C)</p>
                        </div>
                        
                        <div>
                            <p class="text-xl font-bold ${risk.color === 'success' ? 'text-success' : risk.color === 'warning' ? 'text-warning' : 'text-danger'}">${risk.level} RISK</p>
                            <p class="text-xs text-gray-500">PoP: ${forecast.pop}%</p>
                        </div>
                    </div>
                    
                    <button class="mt-4 text-xs text-red-500 hover:text-red-700 transition" 
                            onclick="deleteEvent(${event.id})">
                        Remove Event
                    </button>
                `;
                
                eventsContainer.appendChild(card);
            });
        }
        
        /**
         * Deletes an event from Local Storage and re-renders the list.
         */
        function deleteEvent(id) {
            if (!confirm('Are you sure you want to remove this event?')) {
                return;
            }

            let events = JSON.parse(localStorage.getItem('savedEvents')) || [];
            
            // Filter out the event with the matching ID
            events = events.filter(event => event.id !== id);
            
            // Save the updated list
            localStorage.setItem('savedEvents', JSON.stringify(events));
            
            // Re-render the page
            renderSavedEvents();
        }

        // Initialize on load
        window.onload = renderSavedEvents;
    </script>
</body>
</html>

